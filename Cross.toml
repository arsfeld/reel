# Cross compilation configuration for cross-rs
# https://github.com/cross-rs/cross

[target.aarch64-unknown-linux-gnu]
# Use a custom Docker image that includes all dependencies
image = "ghcr.io/cross-rs/aarch64-unknown-linux-gnu:latest"

# Pre-build hook to install required dependencies in the Docker container
pre-build = [
    "dpkg --add-architecture arm64",
    "apt-get update",
    "apt-get install -y --no-install-recommends libgtk-4-dev:arm64 libadwaita-1-dev:arm64 libgstreamer1.0-dev:arm64 libgstreamer-plugins-base1.0-dev:arm64 libmpv-dev:arm64 libsqlite3-dev:arm64 libssl-dev:arm64 libdbus-1-dev:arm64"
]

# Pass through environment variables from the host
[target.aarch64-unknown-linux-gnu.env]
passthrough = [
    "CARGO_TERM_COLOR",
    "VERSION",
    "ARCH"
]